!function(e){function i(i){for(var t,n,a=i[0],r=i[1],o=0,l=[];o<a.length;o++)n=a[o],s[n]&&l.push(s[n][0]),s[n]=0;for(t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);for(h&&h(i);l.length;)l.shift()()}var t={},s={0:0};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.e=function(e){var i=[],t=s[e];if(0!==t)if(t)i.push(t[2]);else{var a=new Promise(function(i,n){t=s[e]=[i,n]});i.push(t[2]=a);var r,o=document.createElement("script");o.charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.src=function(e){return n.p+"files_sharing."+({}[e]||e)+".js"}(e),r=function(i){o.onerror=o.onload=null,clearTimeout(h);var t=s[e];if(0!==t){if(t){var n=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src,r=new Error("Loading chunk "+e+" failed.\n("+n+": "+a+")");r.type=n,r.request=a,t[1](r)}s[e]=void 0}};var h=setTimeout(function(){r({type:"timeout",target:o})},12e4);o.onerror=o.onload=r,document.head.appendChild(o)}return Promise.all(i)},n.m=e,n.c=t,n.d=function(e,i,t){n.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,i){if(1&i&&(e=n(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var s in e)n.d(t,s,function(i){return e[i]}.bind(null,s));return t},n.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(i,"a",i),i},n.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},n.p="/js/dist/",n.oe=function(e){throw console.error(e),e};var a=window.webpackJsonp=window.webpackJsonp||[],r=a.push.bind(a);a.push=i,a=a.slice();for(var o=0;o<a.length;o++)i(a[o]);var h=r;n(n.s=0)}([function(e,i,s){"use strict";s.r(i);s(1),s(2),s(3),s(4),s(5);s.nc=btoa(OC.requestToken),s.p=OC.linkTo("files_sharing","js/dist/"),window.OCP.Collaboration.registerType("files",{action:function(){return new Promise(function(e,i){OC.dialogs.filepicker("Link to a file",function(t){OC.Files.getClient().getFileInfo(t).then(function(i,t){e(t.id)},function(){i()})},!1)})},typeString:t("files_sharing","file"),typeIconClass:"icon-files-dark"}),window.OCA.Sharing=OCA.Sharing},function(e,i){OCA.Sharing||(OCA.Sharing={}),OCA.Sharing.App={_inFileList:null,_outFileList:null,_overviewFileList:null,initSharingIn:function(e){return this._inFileList?this._inFileList:(this._inFileList=new OCA.Sharing.FileList(e,{id:"shares.self",sharedWithUser:!0,fileActions:this._createFileActions(),config:OCA.Files.App.getFilesConfig(),shown:!0}),this._extendFileList(this._inFileList),this._inFileList.appName=t("files_sharing","Shared with you"),this._inFileList.$el.find("#emptycontent").html('<div class="icon-shared"></div><h2>'+t("files_sharing","Nothing shared with you yet")+"</h2><p>"+t("files_sharing","Files and folders others share with you will show up here")+"</p>"),this._inFileList)},initSharingOut:function(e){return this._outFileList?this._outFileList:(this._outFileList=new OCA.Sharing.FileList(e,{id:"shares.others",sharedWithUser:!1,fileActions:this._createFileActions(),config:OCA.Files.App.getFilesConfig(),shown:!0}),this._extendFileList(this._outFileList),this._outFileList.appName=t("files_sharing","Shared with others"),this._outFileList.$el.find("#emptycontent").html('<div class="icon-shared"></div><h2>'+t("files_sharing","Nothing shared yet")+"</h2><p>"+t("files_sharing","Files and folders you share will show up here")+"</p>"),this._outFileList)},initSharingLinks:function(e){return this._linkFileList?this._linkFileList:(this._linkFileList=new OCA.Sharing.FileList(e,{id:"shares.link",linksOnly:!0,fileActions:this._createFileActions(),config:OCA.Files.App.getFilesConfig(),shown:!0}),this._extendFileList(this._linkFileList),this._linkFileList.appName=t("files_sharing","Shared by link"),this._linkFileList.$el.find("#emptycontent").html('<div class="icon-public"></div><h2>'+t("files_sharing","No shared links")+"</h2><p>"+t("files_sharing","Files and folders you share by link will show up here")+"</p>"),this._linkFileList)},initSharingDeleted:function(e){return this._deletedFileList?this._deletedFileList:(this._deletedFileList=new OCA.Sharing.FileList(e,{id:"shares.deleted",showDeleted:!0,sharedWithUser:!0,fileActions:this._restoreShareAction(),config:OCA.Files.App.getFilesConfig(),shown:!0}),this._extendFileList(this._deletedFileList),this._deletedFileList.appName=t("files_sharing","Deleted shares"),this._deletedFileList.$el.find("#emptycontent").html('<div class="icon-share"></div><h2>'+t("files_sharing","No deleted shares")+"</h2><p>"+t("files_sharing","Shares you deleted will show up here")+"</p>"),this._deletedFileList)},initShareingOverview:function(e){return this._overviewFileList?this._overviewFileList:(this._overviewFileList=new OCA.Sharing.FileList(e,{id:"shares.overview",config:OCA.Files.App.getFilesConfig(),isOverview:!0,shown:!0}),this._extendFileList(this._overviewFileList),this._overviewFileList.appName=t("files_sharing","Shares"),this._overviewFileList.$el.find("#emptycontent").html('<div class="icon-share"></div><h2>'+t("files_sharing","No shares")+"</h2><p>"+t("files_sharing","Shares will show up here")+"</p>"),this._overviewFileList)},removeSharingIn:function(){this._inFileList&&this._inFileList.$fileList.empty()},removeSharingOut:function(){this._outFileList&&this._outFileList.$fileList.empty()},removeSharingLinks:function(){this._linkFileList&&this._linkFileList.$fileList.empty()},removeSharingDeleted:function(){this._deletedFileList&&this._deletedFileList.$fileList.empty()},removeSharingOverview:function(){this._overviewFileList&&this._overviewFileList.$fileList.empty()},destroy:function(){OCA.Files.fileActions.off("setDefault.app-sharing",this._onActionsUpdated),OCA.Files.fileActions.off("registerAction.app-sharing",this._onActionsUpdated),this.removeSharingIn(),this.removeSharingOut(),this.removeSharingLinks(),this._inFileList=null,this._outFileList=null,this._linkFileList=null,this._overviewFileList=null,delete this._globalActionsInitialized},_createFileActions:function(){var e=new OCA.Files.FileActions;return e.registerDefaultActions(),e.merge(OCA.Files.fileActions),this._globalActionsInitialized||(this._onActionsUpdated=_.bind(this._onActionsUpdated,this),OCA.Files.fileActions.on("setDefault.app-sharing",this._onActionsUpdated),OCA.Files.fileActions.on("registerAction.app-sharing",this._onActionsUpdated),this._globalActionsInitialized=!0),e.register("dir","Open",OC.PERMISSION_READ,"",function(e,i){OCA.Files.App.setActiveView("files",{silent:!0}),OCA.Files.App.fileList.changeDirectory(OC.joinPaths(i.$file.attr("data-path"),e),!0,!0)}),e.setDefault("dir","Open"),e},_restoreShareAction:function(){var e=new OCA.Files.FileActions;return e.registerAction({name:"Restore",displayName:"",altText:t("files_sharing","Restore share"),mime:"all",permissions:OC.PERMISSION_ALL,iconClass:"icon-history",type:OCA.Files.FileActions.TYPE_INLINE,actionHandler:function(e,i){var s=i.$file.data("shareId");$.post(OC.linkToOCS("apps/files_sharing/api/v1/deletedshares",2)+s).success(function(e){i.fileList.remove(i.fileInfoModel.attributes.name)}).fail(function(){OC.Notification.showTemporary(t("files_sharing","Something happened. Unable to restore the share."))})}}),e},_onActionsUpdated:function(e){_.each([this._inFileList,this._outFileList,this._linkFileList],function(i){i&&(e.action?i.fileActions.registerAction(e.action):e.defaultAction&&i.fileActions.setDefault(e.defaultAction.mime,e.defaultAction.name))})},_extendFileList:function(e){e.fileSummary.$el.find(".filesize").remove()}},$(document).ready(function(){$("#app-content-sharingin").on("show",function(e){OCA.Sharing.App.initSharingIn($(e.target))}),$("#app-content-sharingin").on("hide",function(){OCA.Sharing.App.removeSharingIn()}),$("#app-content-sharingout").on("show",function(e){OCA.Sharing.App.initSharingOut($(e.target))}),$("#app-content-sharingout").on("hide",function(){OCA.Sharing.App.removeSharingOut()}),$("#app-content-sharinglinks").on("show",function(e){OCA.Sharing.App.initSharingLinks($(e.target))}),$("#app-content-sharinglinks").on("hide",function(){OCA.Sharing.App.removeSharingLinks()}),$("#app-content-deletedshares").on("show",function(e){OCA.Sharing.App.initSharingDeleted($(e.target))}),$("#app-content-deletedshares").on("hide",function(){OCA.Sharing.App.removeSharingDeleted()}),$("#app-content-shareoverview").on("show",function(e){OCA.Sharing.App.initShareingOverview($(e.target))}),$("#app-content-shareoverview").on("hide",function(){OCA.Sharing.App.removeSharingOverview()})})},function(e,i){var s;(s=function(e,i){this.initialize(e,i)}).prototype=_.extend({},OCA.Files.FileList.prototype,{appName:"Shares",_sharedWithUser:!1,_linksOnly:!1,_showDeleted:!1,_clientSideSort:!0,_allowSelection:!1,_isOverview:!1,initialize:function(e,i){OCA.Files.FileList.prototype.initialize.apply(this,arguments),this.initialized||(i&&i.sharedWithUser&&(this._sharedWithUser=!0),i&&i.linksOnly&&(this._linksOnly=!0),i&&i.showDeleted&&(this._showDeleted=!0),i&&i.isOverview&&(this._isOverview=!0))},_renderRow:function(){return OCA.Files.FileList.prototype._renderRow.apply(this,arguments)},_createRow:function(e){var i=OCA.Files.FileList.prototype._createRow.apply(this,arguments);if(i.find(".filesize").remove(),i.find("td.date").before(i.children("td:first")),i.find("td.filename input:checkbox").remove(),i.attr("data-share-id",_.pluck(e.shares,"id").join(",")),this._sharedWithUser){i.attr("data-share-owner",e.shareOwner),i.attr("data-mounttype","shared-root");var s=parseInt(i.attr("data-permissions"))|OC.PERMISSION_DELETE;i.attr("data-permissions",s)}if(this._showDeleted&&(s=e.permissions,i.attr("data-share-permissions",s)),this._linksOnly){var n=0;e.shares&&null!==e.shares[0].expiration&&(n=moment(e.shares[0].expiration).valueOf()),i.attr("data-expiration",n);var a,r,o=Math.round((n-(new Date).getTime())/1e3/60/60/24*5);o>=160&&(o=160),n>0?(a=OC.Util.formatDate(n),r=OC.Util.relativeModifiedDate(n)):(a=t("files_sharing","No expiration date set"),r="",o=160),td=$("<td></td>").attr({class:"date"}),td.append($("<span></span>").attr({class:"modified",title:a,style:"color:rgb("+o+","+o+","+o+")"}).text(r).tooltip({placement:"top"})),i.append(td)}return i},setSharedWithUser:function(e){this._sharedWithUser=!!e},updateEmptyContent:function(){"/"===this.getCurrentDirectory()?(this.$el.find("#emptycontent").toggleClass("hidden",!this.isEmpty),this.$el.find("#filestable thead th").toggleClass("hidden",this.isEmpty),this._linksOnly||this.$el.find("th.column-expiration").addClass("hidden")):OCA.Files.FileList.prototype.updateEmptyContent.apply(this,arguments)},getDirectoryPermissions:function(){return OC.PERMISSION_READ|OC.PERMISSION_DELETE},updateStorageStatistics:function(){},updateRow:function(e,i,t){return e},reload:function(){this.showMask(),this._reloadCall&&this._reloadCall.abort(),this._setCurrentDir("/",!1);var e=[],i={url:OC.linkToOCS("apps/files_sharing/api/v1",2)+"deletedshares",data:{format:"json",include_tags:!0},type:"GET",beforeSend:function(e){e.setRequestHeader("OCS-APIREQUEST","true")}},t={url:OC.linkToOCS("apps/files_sharing/api/v1")+"shares",data:{format:"json",shared_with_me:!1!==this._sharedWithUser,include_tags:!0},type:"GET",beforeSend:function(e){e.setRequestHeader("OCS-APIREQUEST","true")}},s={url:OC.linkToOCS("apps/files_sharing/api/v1")+"remote_shares",data:{format:"json",include_tags:!0},type:"GET",beforeSend:function(e){e.setRequestHeader("OCS-APIREQUEST","true")}};this._showDeleted?e.push($.ajax(i)):(e.push($.ajax(t)),(!1!==this._sharedWithUser||this._isOverview)&&e.push($.ajax(s)),this._isOverview&&(t.data.shared_with_me=!t.data.shared_with_me,e.push($.ajax(t)))),this._reloadCall=$.when.apply($,e);var n=this.reloadCallback.bind(this);return this._reloadCall.then(n,n)},reloadCallback:function(e,i,s){delete this._reloadCall,this.hideMask(),this.$el.find("#headerSharedWith").text(t("files_sharing",this._sharedWithUser?"Shared by":"Shared with"));var n=[];return e[0]&&e[0].ocs&&(e=e[0]),i&&i[0]&&i[0].ocs&&(i=i[0]),s&&s[0]&&s[0].ocs&&(s=s[0]),e.ocs&&e.ocs.data&&(n=n.concat(this._makeFilesFromShares(e.ocs.data,this._sharedWithUser))),i&&i.ocs&&i.ocs.data&&(n=n.concat(this._makeFilesFromRemoteShares(i.ocs.data))),s&&s.ocs&&s.ocs.data&&(n=n.concat(this._makeFilesFromShares(s.ocs.data,!this._sharedWithUser))),this.setFiles(n),!0},_makeFilesFromRemoteShares:function(e){var i=e;return i=_.chain(i).map(function(e){var i={shareOwner:e.owner+"@"+e.remote.replace(/.*?:\/\//g,""),name:OC.basename(e.mountpoint),mtime:1e3*e.mtime,mimetype:e.mimetype,type:e.type,id:e.file_id,path:OC.dirname(e.mountpoint),permissions:e.permissions,tags:e.tags||[]};return i.shares=[{id:e.id,type:OC.Share.SHARE_TYPE_REMOTE}],i}).value()},_makeFilesFromShares:function(e,i){var t=e;return this._linksOnly&&(t=_.filter(e,function(e){return e.share_type===OC.Share.SHARE_TYPE_LINK})),(t=_.chain(t).map(function(e){var t={id:e.file_source,icon:OC.MimeType.getIconUrl(e.mimetype),mimetype:e.mimetype,tags:e.tags||[]};return"folder"===e.item_type?(t.type="dir",t.mimetype="httpd/unix-directory"):t.type="file",t.share={id:e.id,type:e.share_type,target:e.share_with,stime:1e3*e.stime,expiration:e.expiration},i?(t.shareOwner=e.displayname_owner,t.shareOwnerId=e.uid_owner,t.name=OC.basename(e.file_target),t.path=OC.dirname(e.file_target),t.permissions=e.permissions,t.path&&(t.extraData=e.file_target)):(e.share_type!==OC.Share.SHARE_TYPE_LINK&&(t.share.targetDisplayName=e.share_with_displayname,t.share.targetShareWithId=e.share_with),t.name=OC.basename(e.path),t.path=OC.dirname(e.path),t.permissions=OC.PERMISSION_ALL,t.path&&(t.extraData=e.path)),t}).reduce(function(e,i){var t=e[i.id],s=i.share.targetDisplayName,n=i.share.targetShareWithId;return t?(i.share.stime>t.mtime&&(t.mtime=i.share.stime),t.shares.push(i.share)):((t=e[i.id]=i).shares=[i.share],t.recipients={},t.recipientData={},t.shareTypes={},t.recipientsCount=0,t.mtime=i.share.stime),s&&(t.recipientsCount<4&&(t.recipients[s]=!0,t.recipientData[t.recipientsCount]={shareWith:n,shareWithDisplayName:s}),t.recipientsCount++),t.shareTypes[i.share.type]=!0,delete i.share,e},{}).values().each(function(e){e.mountType="shared",delete e.recipientsCount,i?delete e.shareTypes:e.shareTypes=_.keys(e.shareTypes)}).value()).sort(this._sortComparator)}}),OCA.Sharing.FileList=s},function(e,i,s){var n;n=OCA.Files.DetailTabView.extend({id:"shareTabView",className:"tab shareTabView",template:function(e){return'<div><div class="dialogContainer"></div><div id="collaborationResources"></div></div>'},getLabel:function(){return t("files_sharing","Sharing")},getIcon:function(){return"icon-shared"},render:function(){var e=this,i=this;if(this._dialog&&(this._dialog.model.off(),this._dialog.remove(),this._dialog=null),this.model){this.$el.html(this.template()),_.isUndefined(this.model.get("sharePermissions"))&&this.model.set("sharePermissions",OCA.Sharing.Util.getSharePermissions(this.model.attributes));var t={itemType:this.model.isDirectory()?"folder":"file",itemSource:this.model.get("id"),possiblePermissions:this.model.get("sharePermissions")},n=new OC.Share.ShareConfigModel,a=new OC.Share.ShareItemModel(t,{configModel:n,fileInfoModel:this.model});this._dialog=new OC.Share.ShareDialogView({configModel:n,model:a}),this.$el.find(".dialogContainer").append(this._dialog.$el),this._dialog.render(),this._dialog.model.fetch(),this._dialog.model.on("change",function(){i.trigger("sharesChanged",a)}),Promise.all([s.e(1),s.e(2)]).then(s.bind(null,6)).then(function(i){var t=new i.Vue({el:"#collaborationResources",render:function(e){return e(i.View)},store:i.Store(),data:{model:e.model.toJSON()}});e.model.on("change",function(){t.data=e.model.toJSON()})})}else this.$el.empty()}}),OCA.Sharing.ShareTabView=n},function(e,i){_.extend(OC.Files.Client,{PROPERTY_SHARE_TYPES:"{"+OC.Files.Client.NS_OWNCLOUD+"}share-types",PROPERTY_OWNER_ID:"{"+OC.Files.Client.NS_OWNCLOUD+"}owner-id",PROPERTY_OWNER_DISPLAY_NAME:"{"+OC.Files.Client.NS_OWNCLOUD+"}owner-display-name"}),OCA.Sharing||(OCA.Sharing={}),OCA.Sharing.Util={attach:function(e){if(OC.Share&&"trashbin"!==e.id&&"files.public"!==e.id){var i=e.fileActions,s=e._createRow;e._createRow=function(e){var t=s.apply(this,arguments),n=OCA.Sharing.Util.getSharePermissions(e);return 0===e.permissions&&(delete i.actions.all.Comment,delete i.actions.all.Details,delete i.actions.all.Goto),t.attr("data-share-permissions",n),e.shareOwner&&(t.attr("data-share-owner",e.shareOwner),t.attr("data-share-owner-id",e.shareOwnerId),"shared-root"===e.mountType&&t.attr("data-permissions",e.permissions|OC.PERMISSION_UPDATE)),e.recipientData&&!_.isEmpty(e.recipientData)&&t.attr("data-share-recipient-data",JSON.stringify(e.recipientData)),e.shareTypes&&t.attr("data-share-types",e.shareTypes.join(",")),t};var n=e.elementToFile;e.elementToFile=function(e){var i=n.apply(this,arguments);if(i.sharePermissions=e.attr("data-share-permissions")||void 0,i.shareOwner=e.attr("data-share-owner")||void 0,i.shareOwnerId=e.attr("data-share-owner-id")||void 0,e.attr("data-share-types")&&(i.shareTypes=e.attr("data-share-types").split(",")),e.attr("data-expiration")){var t=parseInt(e.attr("data-expiration"));i.shares=[],i.shares.push({expiration:t})}return i};var a=e._getWebdavProperties;e._getWebdavProperties=function(){var e=a.apply(this,arguments);return e.push(OC.Files.Client.PROPERTY_OWNER_ID),e.push(OC.Files.Client.PROPERTY_OWNER_DISPLAY_NAME),e.push(OC.Files.Client.PROPERTY_SHARE_TYPES),e},e.filesClient.addFileInfoParser(function(e){var i={},t=e.propStat[0].properties,s=t[OC.Files.Client.PROPERTY_PERMISSIONS];s&&s.indexOf("S")>=0&&(i.shareOwner=t[OC.Files.Client.PROPERTY_OWNER_DISPLAY_NAME],i.shareOwnerId=t[OC.Files.Client.PROPERTY_OWNER_ID]);var n=t[OC.Files.Client.PROPERTY_SHARE_TYPES];return n&&(i.shareTypes=_.chain(n).filter(function(e){return e.namespaceURI===OC.Files.Client.NS_OWNCLOUD&&"share-type"===e.nodeName.split(":")[1]}).map(function(e){return parseInt(e.textContent||e.text,10)}).value()),i}),e.$el.on("fileActionsReady",function(e){var i=e.$files;_.each(i,function(e){var i=$(e),t=i.attr("data-share-types")||"",s=i.attr("data-share-owner");if(t||s){var n=!1,a=!1;_.each(t.split(",")||[],function(e){(e=parseInt(e,10))===OC.Share.SHARE_TYPE_LINK?n=!0:e===OC.Share.SHARE_TYPE_EMAIL?n=!0:e===OC.Share.SHARE_TYPE_USER?a=!0:e===OC.Share.SHARE_TYPE_GROUP?a=!0:e===OC.Share.SHARE_TYPE_REMOTE?a=!0:e===OC.Share.SHARE_TYPE_CIRCLE?a=!0:e===OC.Share.SHARE_TYPE_ROOM&&(a=!0)}),OCA.Sharing.Util._updateFileActionIcon(i,a,n)}})}),e.$el.on("changeDirectory",function(){OCA.Sharing.sharesLoaded=!1}),i.registerAction({name:"Share",displayName:"",altText:t("core","Share"),mime:"all",permissions:OC.PERMISSION_ALL,iconClass:"icon-shared",type:OCA.Files.FileActions.TYPE_INLINE,actionHandler:function(i,t){var s=parseInt(t.$file.data("share-permissions"),10);(isNaN(s)||s>0)&&e.showDetailsView(i,"shareTabView")},render:function(e,t,s){return 0!=(parseInt(s.$file.data("permissions"),10)&OC.PERMISSION_SHARE)||s.$file.attr("data-share-owner")?i._defaultRenderAction.call(i,e,t,s):null}});var r=new OCA.Sharing.ShareTabView("shareTabView",{order:-20});r.on("sharesChanged",function(i){var t=i.fileInfoModel,s=e.findFileEl(t.get("name")),n=i.hasLinkShares();i.get("shares").forEach(function(e){e.share_type===OC.Share.SHARE_TYPE_EMAIL&&(n=!0)}),OCA.Sharing.Util._updateFileListDataAttributes(e,s,i),OCA.Sharing.Util._updateFileActionIcon(s,i.hasUserShares(),n)||OC.Share.markFileAsShared(s,!1,!1),t.set({shareTypes:i.getShareTypes(),icon:s.attr("data-icon")})}),e.registerTabView(r);var o=new OCA.Sharing.ShareBreadCrumbView({shareTab:r});e.registerBreadCrumbDetailView(o)}},_updateFileListDataAttributes:function(e,i,t){if("files"!==e.id)if(_.pluck(t.get("shares"),"share_with_displayname").length){var s=_.mapObject(t.get("shares"),function(e){return{shareWith:e.share_with,shareWithDisplayName:e.share_with_displayname}});i.attr("data-share-recipient-data",JSON.stringify(s))}else i.removeAttr("data-share-recipient-data")},_updateFileActionIcon:function(e,i,t){return!!(i||t||e.attr("data-share-recipient-data")||e.attr("data-share-owner"))&&(OC.Share.markFileAsShared(e,!0,t),!0)},getSharePermissions:function(e){return e.sharePermissions}},OC.Plugins.register("OCA.Files.FileList",OCA.Sharing.Util)},function(e,i){
/**
 * @copyright 2016 Christoph Wurst <christoph@winzerhof-wurst.at>
 *
 * @author 2016 Christoph Wurst <christoph@winzerhof-wurst.at>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 */
!function(){"use strict";var e=OC.Backbone.View.extend({tagName:"span",events:{click:"_onClick"},_dirInfo:void 0,_shareTab:void 0,initialize:function(e){this._shareTab=e.shareTab},render:function(e){if(this._dirInfo=e.dirInfo||null,null===this._dirInfo||"/"===this._dirInfo.path&&""===this._dirInfo.name)this.$el.removeClass("shared icon-public icon-shared"),this.$el.hide();else{var i=e.dirInfo&&e.dirInfo.shareTypes&&e.dirInfo.shareTypes.length>0;this.$el.removeClass("shared icon-public icon-shared"),i?(this.$el.addClass("shared"),-1!==e.dirInfo.shareTypes.indexOf(OC.Share.SHARE_TYPE_LINK)?this.$el.addClass("icon-public"):this.$el.addClass("icon-shared")):this.$el.addClass("icon-shared"),this.$el.show(),this.delegateEvents()}return this},_onClick:function(e){e.preventDefault();var i=new OCA.Files.FileInfoModel(this._dirInfo),t=this;i.on("change",function(){t.render({dirInfo:t._dirInfo})}),this._shareTab.on("sharesChanged",function(e){for(var i=[],s=e.getSharesWithCurrentItem(),n=0;n<s.length;n++)-1===i.indexOf(s[n].share_type)&&i.push(s[n].share_type);e.hasLinkShares()&&i.push(OC.Share.SHARE_TYPE_LINK),t._dirInfo.shareTypes=i,t.render({dirInfo:t._dirInfo})}),OCA.Files.App.fileList.showDetailsView(i,"shareTabView")}});OCA.Sharing.ShareBreadCrumbView=e}()}]);
//# sourceMappingURL=files_sharing.js.map